{{! template-id: TypescriptJson01 }}
{{! template-name: Template which generates JSON file to be consumed by javascript with typescript (*.d.ts) type definition. Usable in web projects. }}
{{~#output fileName=(x-concat model.name ".d.ts") ~}}
Typescript.merge(@, {HasAmbientNamespaceName: AmbientNamespaceName!=''})
{{~/output~}}
{{~#each model.languages ~}}
    {{output-child templateId="TypescriptJson01Json" host=(x-value query="{lang: @}") }}
{{~/each~}}

{{#with model}}
{{#if @root.settings.HasAmbientNamespaceName }}
declare namespace {{ @root.settings.AmbientNamespaceName }} {
	{{> template }}
	
{{else}}
{{> template }}

{{/if}}
{{#if @root.settings.HasAmbientNamespaceName }}
}
{{/if}}
{{/with}}
{{#*inline "template"}}
export interface {{ x-concat @root.settings.InterfacePrefix name }} {
{{#each categories ~}}
	{{> category }}
{{/each}}
{{#if resources}}
{{> resources }}
{{/if}}
}

export interface {{ x-concat @root.settings.InterfacePrefix name "Metadata" }} {
    default: string;
    languages: Array<string>;
}
{{/inline}}
{{#*inline "category"}}
{{name}}: {
{{#each categories }}
	{{> category ~}}
{{/each}}
{{> resources }}
}{{#if ( x-logical (x-equals @last false) parent.hasResources op="or" ) }},{{/if}}
{{/inline}}
{{#*inline "resources"}}
{{#if resources}}
{{#each resources}}
	{{name}}: string;
{{/each}}
{{/if}}
{{/inline}}